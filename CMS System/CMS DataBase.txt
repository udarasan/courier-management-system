drop database CMS;
CREATE DATABASE CMS;
USE CMS;

CREATE TABLE Customer(
	CID VARCHAR(10) NOT NULL,
	FirstName VARCHAR(45)NOT NULL,
	SecondName VARCHAR(45) NOT NULL,
	TelephoneNO VARCHAR(45)NOT NULL,
	Address VARCHAR(45)NOT NULL,
	Email VARCHAR(45)NOT NULL,
	CONSTRAINT PRIMARY KEY (CID)
);
CREATE TABLE BillDetails(
	BID VARCHAR(10) NOT NULL,
	CID VARCHAR(10) NOT NULL,
	ItemType VARCHAR(50) NOT NULL,
	PaymentType VARCHAR(45) NOT NULL,
	Rates DECIMAL(10,2) NOT NULL,
	TodayDate DATE,
	CONSTRAINT PRIMARY KEY (BID),
	CONSTRAINT FOREIGN KEY(CID) REFERENCES Customer(CID)
	ON UPDATE CASCADE ON DELETE CASCADE
	
);
CREATE TABLE DeliveryDetails(
	DID VARCHAR(20) NOT NULL,
	BID VARCHAR(10) NOT NULL,
	DFirstName VARCHAR(45)NOT NULL,
	DSecondName VARCHAR(45) NOT NULL,
	DTelephoneNO VARCHAR(45)NOT NULL,
	DAddress VARCHAR(45)NOT NULL,
	DueDate DATE,
	OrderAction VARCHAR(10) NOT NULL,
	CONSTRAINT PRIMARY KEY (DID),
	CONSTRAINT FOREIGN KEY(BID) REFERENCES BillDetails(BID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE ReturnDetails(
	RID VARCHAR(10) NOT NULL,
	BID VARCHAR(20) NOT NULL,
	Reason VARCHAR(50) NOT NULL,
	ReturnDate DATE,
	CONSTRAINT PRIMARY KEY (RID),
	CONSTRAINT FOREIGN KEY(BID) REFERENCES BillDetails(BID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Employee(
	EID VARCHAR(10) NOT NULL,
	FirstName VARCHAR(45)NOT NULL,
	SecondName VARCHAR(45) NOT NULL,
	TelephoneNO VARCHAR(45)NOT NULL,
	Address VARCHAR(45)NOT NULL,
	Email VARCHAR(45)NOT NULL,
	CONSTRAINT PRIMARY KEY (EID)
);

CREATE TABLE Login(
	UserName VARCHAR(45)NOT NULL,
	EID VARCHAR(10) NOT NULL,
	Password VARCHAR(45) NOT NULL,
	CONSTRAINT PRIMARY KEY (UserName),
	CONSTRAINT FOREIGN KEY(EID) REFERENCES Employee(EID)
	ON UPDATE CASCADE ON DELETE CASCADE
	
);

drop table MessageBox;
CREATE TABLE MessageBox(
	MSGID VARCHAR(10) NOT NULL,
	Message VARCHAR(1000) NOT NULL,
	CONSTRAINT PRIMARY KEY (MSGID)
	
	
);